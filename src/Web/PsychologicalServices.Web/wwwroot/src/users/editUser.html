<template>
	<require from="valueConverters/date-format"></require>
	<require from="valueConverters/sort-array"></require>
	<require from="common/validation-summary.html"></require>
	<require from="common/date-picker"></require>
	
<h2>${editType} User</h2>

<div class="container-fluid">

	<div class="row" if.bind="validationErrors">
		<div class="col-xs-6">
			<validation-summary errors.bind="validationErrors"></validation-summary>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="firstName">First Name</label>
				<input id="firstName" type="text" class="form-control" value.bind="user.firstName" />
			</div>
		</div>
		<div class="col-xs-3">
			<div class="form-group">
				<label for="lastName">Last Name</label>
				<input id="lastName" type="text" class="form-control" value.bind="user.lastName" />
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="email">Email</label>
				<input id="email" type="text" class="form-control" value.bind="user.email" />
			</div>
		</div>
		<div class="col-xs-3">
			<div class="checkbox" repeat.for="role of roles">
				<label>
					<input type="checkbox" model.bind="role" checked.bind="user.roles" matcher.bind="roleMatcher" />&nbsp;${role.name}
				</label>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="checkbox">
				<label>
					<input type="checkbox" checked.bind="user.isActive" />&nbsp;Is Active?
				</label>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label>Unavailable Dates</label>
				<div date-picker="options.bind: datepickerOptions; dates.bind: unavailableDates" datechanged.delegate="dateChanged($event)"></div>
			</div>
		</div>
		<div class="col-xs-3">
			<ul>
				<li repeat.for="unavailability of user.unavailability | sortArray:{property:'startDate',direction:'asc'}">
					${unavailability.startDate | dateFormat:config.longDateFormat}
				</li>
			</ul>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-6">
			<table class="table table-condensed">
				<thead>
					<tr>
						<th>Location</th>
						<th>Amount</th>
					</tr>
				</thead>
				<tbody>
					<tr repeat.for="travelFee of user.travelFees">
						<td>${travelFee.location.name}</td>
						<td>
							<input type="number" class="form-control" value.bind="travelFee.amount" />
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-6">
			<button type="button" class="btn btn-default" click.delegate="back()">
				<i class="fa fa-arrow-left"></i>&nbsp;Back
			</button>
			<button type="button" class="btn btn-primary" click.delegate="save()">
				<i class="fa fa-save"></i>&nbsp;Save
			</button>
		</div>
	</div>
</div>

</template>