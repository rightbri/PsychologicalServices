<template>
	<require from="valueConverters/boolean"></require>
	<require from="valueConverters/date-format"></require>
	<require from="valueConverters/gender"></require>
	
<h2>Edit Assessment</h2>

<div class="container-fluid">
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="assessmentType">Assessment Type</label>
				<select id="assessmentType" class="form-control" value.bind="assessment.assessmentTypeId">
					<option></option>
					<option repeat.for="assessmentType of assessmentTypes" model.bind="assessmentType.assessmentTypeId">
						${assessmentType.name}
					</option>
				</select>
			</div>
		</div>
		<div class="col-xs-3">
			<div class="form-group">
				<label for="reportStatus">Report Status</label>
				<select id="reportStatus" class="form-control" value.bind="assessment.reportStatusId">
					<option></option>
					<option repeat.for="reportStatus of reportStatuses" model.bind="reportStatus.reportStatusId">
						${reportStatus.name}
					</option>
				</select>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="referralSource">Referral Source</label>
				<select id="referralSource" class="form-control" value.bind="assessment.referralSourceId">
					<option></option>
					<option repeat.for="referralSource of referralSources" model.bind="referralSource.referralSourceId">
						${referralSource.name}
					</option>
				</select>
			</div>
		</div>
		<div class="col-xs-3">
			<div class="form-group">
				<label for="fileSize">File Size</label>
				<input id="fileSize" type="number" class="form-control" value.bind="assessment.fileSize" />
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="medicalFileReceivedDate">Medical File Received Date</label>
				<input id="medicalFileReceivedDate" type="text" class="form-control" value.bind="assessment.medicalFileReceivedDate" />
			</div>
		</div>
		<div class="col-xs-3">
			<div class="form-group">
				<label for="referralType">Referral Type</label>
				<select id="referralType" class="form-control" value.bind="assessment.referralTypeId">
					<option></option>
					<option repeat.for="referralType of referralTypes" model.bind="referralType.referralTypeId">
						${referralType.name}
					</option>
				</select>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="referralSourceContactEmail">Referral Source Contact Email</label>
				<input id="referralSourceContactEmail" type="email" class="form-control" value.bind="assessment.referralSourceContactEmail" />
			</div>
		</div>
		<div class="col-xs-3">
			<label>Issues in Dispute</label>
			<div class="checkbox" repeat.for="issueInDispute of issuesInDispute">
				<label>
					<input type="checkbox" model.bind="issueInDispute" checked.bind="assessment.issuesInDispute" matcher.bind="issueInDisputeMatcher" />&nbsp;${issueInDispute.name}
				</label>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="docListWriter">Doc List Writer</label>
				<select id="docListWriter" class="form-control" value.bind="assessment.docListWriterId">
					<option></option>
					<option repeat.for="user of docListWriters" model.bind="user.userId">
						${user.firstName}
					</option>
				</select>
			</div>
		</div>
		<div class="col-xs-3">
			<div class="form-group">
				<label for="notesWriter">Notes Writer</label>
				<select id="notesWriter" class="form-control" value.bind="assessment.notesWriterId">
					<option></option>
					<option repeat.for="user of notesWriters" model.bind="user.userId">
						${user.firstName}
					</option>
				</select>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-3">
			<div class="form-group">
				<label for="company">Company</label>
				<select id="company" class="form-control" model.bind="assessment.companyId">
					<option></option>
					<option repeat.for="company of companies" value.bind="company.companyId">
						${company.name}
					</option>
				</select>
			</div>
		</div>
		<div class="col-xs-3">
			<div class="checkbox">
				<label>
					<input type="checkbox" checked.bind="assessment.deleted" />&nbsp;Deleted
				</label>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-6">
			<table class="table table-striped">
				<thead>
					<tr>
						<th></th>
						<th>Claim #</th>
						<th>Date of Loss</th>
						<th>Claimant</th>
						<th>Age</th>
						<th>Gender</th>
						<th>Deleted</th>
					</tr>
				</thead>
				<tbody>
					<tr repeat.for="claim of assessment.claims">
						<td>
							<button type="button" class="btn btn-default" click.delegate="editClaim(claim)">
								<i class="fa fa-edit"></i>
							</button>
						</td>
						<td>${claim.claimNumber}</td>
						<td>${claim.dateOfLoss | dateFormat:'M/D/YYYY'}</td>
						<td>${claim.claimant.firstName} ${claim.claimant.lastName}</td>
						<td>${claim.claimant.age}</td>
						<td>${claim.claimant.gender | gender}</td>
						<td>
							<input type="checkbox" checked.bind="claim.deleted" />
						</td>
					</tr>
					<tr>
						<td colspan="7">
							<button type="button" class="btn btn-default" click.delegate="newClaim()">
								<i class="fa fa-plus"></i>
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-6">
			<table class="table table-striped">
				<thead>
					<tr>
						<th></th>
						<th>Date</th>
						<th>Time</th>
						<th>Location</th>
						<th>Status</th>
						<th>Psychometrist</th>
						<th>Confirmed</th>
					</tr>
				</thead>
				<tbody>
					<tr repeat.for="appointment of assessment.appointments">
						<td>
							<button type="button" class="btn btn-default" click.delegate="editAppointment(appointment)">
								<i class="fa fa-edit"></i>
							</button>
						</td>
						<td>${appointment.appointmentTime | dateFormat:'M/D/YYYY'}</td>
						<td>${appointment.appointmentTime | dateFormat:'h:mmA'}</td>
						<td>${appointment.location.name}</td>
						<td>${appointment.appointmentStatus.name}</td>
						<td>${appointment.psychometrist.firstName}</td>
						<td>${appointment.psychometristConfirmed | boolean }</td>
					</tr>
					<tr>
						<td colspan="7">
							<button type="button" class="btn btn-default" click.delegate="newAppointment()">
								<i class="fa fa-plus"></i>
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<div class="row">
		<div class="col-xs-6">
			<button type="button" class="btn btn-default" click.delegate="back()">
				<i class="fa fa-arrow-left"></i> Back
			</button>
			<button type="button" class="btn btn-primary" click.delegate="save()">
				Save <i class="fa fa-save"></i>
			</button>
		</div>
	</div>
</div>

</template>